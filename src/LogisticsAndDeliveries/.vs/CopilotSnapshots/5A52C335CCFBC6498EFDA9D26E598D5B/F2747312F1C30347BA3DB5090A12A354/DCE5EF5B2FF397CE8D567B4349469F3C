using LogisticsAndDeliveries.Core.Abstractions;
using LogisticsAndDeliveries.Domain.Packages.ValueObjects;
using System;

namespace LogisticsAndDeliveries.Domain.Packages
{
    public class Package : AggregateRoot
    {
        public PackageLabel PackageLabel { get; private set; }
        public EvidenceOfDelivery? EvidenceOfDelivery { get; private set; }
        public DeliveryStatus Status { get; private set; }

        public Package(Guid id, PackageLabel packageLabel) : base(id)
        {
            PackageLabel = packageLabel;
            Status = DeliveryStatus.Pending;
        }

        public void MarkInTransit()
        {
            Status = DeliveryStatus.InTransit;
        }

        public void MarkDelivered(EvidenceOfDelivery evidence)
        {
            EvidenceOfDelivery = evidence;
            Status = DeliveryStatus.Delivered;
        }

        public void MarkFailed()
        {
            Status = DeliveryStatus.Failed;
        }

        public void Cancel()
        {
            Status = DeliveryStatus.Cancelled;
        }
    }
}
